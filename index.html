<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Miami Ready">
    <meta name="theme-color" content="#0f0f0f">
    <title>70 Days Miami Ready</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif; background: #0f0f0f; color: #fff; min-height: 100vh; }
        ::-webkit-scrollbar { display: none; }
        .app { max-width: 430px; margin: 0 auto; min-height: 100vh; padding-bottom: 100px; }
        
        .header { padding: 50px 24px 20px; text-align: center; }
        .date-display { font-size: 0.9rem; color: #888; margin-bottom: 12px; font-weight: 500; }
        .day-ring { width: 120px; height: 120px; border-radius: 50%; border: 4px solid #333; margin: 0 auto 14px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; background: linear-gradient(135deg, rgba(167,139,250,0.1), rgba(236,72,153,0.1)); }
        .day-ring::before { content: ''; position: absolute; top: -4px; left: -4px; right: -4px; bottom: -4px; border-radius: 50%; border: 4px solid transparent; border-top-color: #a78bfa; transform: rotate(var(--progress-rotation, 0deg)); }
        .day-num { font-size: 2.5rem; font-weight: 800; background: linear-gradient(135deg, #a78bfa, #ec4899); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .day-label { font-size: 0.75rem; color: #888; text-transform: uppercase; }
        
        .day-type-badge { display: inline-flex; align-items: center; gap: 8px; padding: 8px 16px; border-radius: 16px; font-size: 0.9rem; font-weight: 600; margin-bottom: 6px; }
        .day-type-badge.barbell { background: rgba(249, 115, 22, 0.2); color: #f97316; }
        .day-type-badge.tempo { background: rgba(236, 72, 153, 0.2); color: #ec4899; }
        .day-type-badge.flex { background: rgba(34, 197, 94, 0.2); color: #22c55e; }
        .phase-info { color: #666; font-size: 0.8rem; }
        .phase-info span { color: #888; }
        
        .log-btn { display: block; width: calc(100% - 48px); margin: 16px 24px; padding: 16px; border-radius: 18px; background: linear-gradient(135deg, #a78bfa, #ec4899); border: none; color: #fff; font-size: 1rem; font-weight: 700; cursor: pointer; box-shadow: 0 8px 30px rgba(167, 139, 250, 0.3); }
        .log-btn.done { background: #1a1a1a; border: 2px solid #22c55e; color: #22c55e; box-shadow: none; }
        
        .summary { padding: 0 24px; margin-bottom: 16px; }
        .summary-card { background: #1a1a1a; border-radius: 16px; padding: 14px 18px; }
        .summary-row { display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #2a2a2a; }
        .summary-row:last-child { border-bottom: none; }
        .summary-label { color: #888; font-size: 0.8rem; }
        .summary-value { font-weight: 600; font-size: 0.9rem; }
        
        .week-schedule { padding: 0 24px; margin-bottom: 16px; }
        .week-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .week-title { font-size: 0.75rem; color: #666; text-transform: uppercase; }
        .week-dates { font-size: 0.75rem; color: #888; }
        .week-days { display: flex; gap: 5px; }
        .week-day { flex: 1; background: #1a1a1a; border-radius: 10px; padding: 8px 2px; text-align: center; cursor: pointer; }
        .week-day.current { border: 2px solid #a78bfa; background: rgba(167,139,250,0.1); }
        .week-day.done { background: linear-gradient(135deg, rgba(167,139,250,0.3), rgba(236,72,153,0.3)); }
        .week-day.future { opacity: 0.4; }
        .week-day .name { color: #666; font-size: 0.65rem; font-weight: 600; }
        .week-day .date { color: #888; font-size: 0.7rem; margin: 2px 0; }
        .week-day .type { font-size: 1rem; }
        
        .stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; padding: 0 24px; margin-bottom: 16px; }
        .stat { background: #1a1a1a; border-radius: 12px; padding: 12px 6px; text-align: center; }
        .stat-value { font-size: 1.3rem; font-weight: 700; }
        .stat-label { font-size: 0.6rem; color: #666; text-transform: uppercase; }
        
        .end-date { text-align: center; padding: 16px; background: linear-gradient(135deg, rgba(167,139,250,0.1), rgba(236,72,153,0.1)); border-radius: 16px; margin: 0 24px 16px; }
        .end-date .label { font-size: 0.75rem; color: #888; margin-bottom: 4px; }
        .end-date .date { font-size: 1rem; font-weight: 700; color: #ec4899; }
        
        .mini-cal { padding: 0 24px; margin-bottom: 16px; }
        .mini-cal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .mini-cal-title { font-size: 0.75rem; color: #666; text-transform: uppercase; }
        .mini-cal-dates { font-size: 0.7rem; color: #888; }
        .mini-cal-grid { display: grid; grid-template-columns: repeat(14, 1fr); gap: 3px; }
        .mini-day { aspect-ratio: 1; border-radius: 3px; background: #1a1a1a; }
        .mini-day.done { background: linear-gradient(135deg, #a78bfa, #ec4899); }
        .mini-day.current { border: 2px solid #a78bfa; }
        .mini-day.future { opacity: 0.3; }
        
        .bottom-nav { position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 430px; background: #0f0f0f; border-top: 1px solid #222; padding: 10px 30px 26px; display: flex; justify-content: space-around; }
        .nav-btn { background: none; border: none; color: #666; cursor: pointer; display: flex; flex-direction: column; align-items: center; gap: 4px; font-size: 0.6rem; padding: 8px 12px; border-radius: 10px; }
        .nav-btn.active { color: #fff; background: rgba(167, 139, 250, 0.15); }
        .nav-btn .icon { font-size: 1.1rem; }
        
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.9); z-index: 1000; display: none; align-items: flex-end; justify-content: center; }
        .modal-overlay.active { display: flex; }
        .modal { background: #1a1a1a; width: 100%; max-width: 430px; max-height: 85vh; border-radius: 24px 24px 0 0; padding: 16px 20px 36px; overflow-y: auto; }
        .modal-handle { width: 36px; height: 4px; background: #444; border-radius: 2px; margin: 0 auto 12px; }
        .modal-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 16px; }
        .modal-title { font-size: 1.1rem; font-weight: 700; }
        .modal-subtitle { font-size: 0.8rem; color: #888; margin-top: 2px; }
        .modal-close { background: #2a2a2a; border: none; color: #888; width: 32px; height: 32px; border-radius: 50%; font-size: 1.1rem; cursor: pointer; }
        
        .section-header { font-size: 0.8rem; font-weight: 600; color: #a78bfa; margin: 16px 0 10px; }
        .section-header:first-child { margin-top: 0; }
        .form-row { display: flex; gap: 10px; margin-bottom: 10px; }
        .form-group { flex: 1; }
        .form-label { display: block; font-size: 0.7rem; color: #666; margin-bottom: 5px; text-transform: uppercase; }
        .form-input { width: 100%; background: #0f0f0f; border: 1px solid #333; border-radius: 10px; padding: 11px 12px; color: #fff; font-size: 0.95rem; outline: none; }
        .form-input:focus { border-color: #a78bfa; }
        .form-input::placeholder { color: #444; }
        
        .connection-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 10px; }
        .conn-btn { aspect-ratio: 1; border: 2px solid #333; background: #0f0f0f; border-radius: 12px; cursor: pointer; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 2px; }
        .conn-btn.selected { border-color: #a78bfa; background: rgba(167, 139, 250, 0.15); }
        .conn-btn .emoji { font-size: 1.3rem; }
        .conn-btn .label { font-size: 0.55rem; color: #666; }
        
        .quick-toggles { display: flex; gap: 8px; margin-bottom: 10px; }
        .quick-toggle { flex: 1; background: #0f0f0f; border: 2px solid #333; border-radius: 10px; padding: 10px 6px; cursor: pointer; text-align: center; }
        .quick-toggle.on { border-color: #22c55e; background: rgba(34, 197, 94, 0.1); }
        .quick-toggle .icon { font-size: 1.1rem; }
        .quick-toggle .text { font-size: 0.65rem; color: #888; }
        .quick-toggle.on .text { color: #22c55e; }
        
        .tempo-options, .flex-options { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin-bottom: 10px; }
        .tempo-opt, .flex-opt { background: #0f0f0f; border: 2px solid #333; border-radius: 10px; padding: 12px 8px; cursor: pointer; text-align: center; }
        .tempo-opt.selected { border-color: #ec4899; background: rgba(236, 72, 153, 0.1); }
        .flex-opt.selected { border-color: #22c55e; background: rgba(34, 197, 94, 0.1); }
        .tempo-opt .name, .flex-opt .name { font-size: 0.8rem; font-weight: 600; }
        .tempo-opt .desc, .flex-opt .time { font-size: 0.65rem; color: #666; margin-top: 2px; }
        
        .details-btn { width: 100%; background: none; border: 1px dashed #333; color: #666; padding: 10px; border-radius: 10px; font-size: 0.75rem; cursor: pointer; margin: 12px 0; }
        .details { display: none; background: #0f0f0f; border-radius: 12px; padding: 12px; margin-bottom: 10px; }
        .details.open { display: block; }
        .details-title { font-size: 0.7rem; color: #666; text-transform: uppercase; margin-bottom: 8px; }
        .toggle-row { display: flex; justify-content: space-between; align-items: center; padding: 6px 0; border-bottom: 1px solid #1a1a1a; }
        .toggle-row:last-child { border-bottom: none; }
        .toggle-label { font-size: 0.75rem; color: #999; }
        .toggle-switch { width: 36px; height: 22px; border-radius: 11px; background: #333; padding: 2px; cursor: pointer; }
        .toggle-switch.on { background: #a78bfa; }
        .toggle-knob { width: 18px; height: 18px; border-radius: 50%; background: #fff; transition: transform 0.2s; }
        .toggle-switch.on .toggle-knob { transform: translateX(14px); }
        
        .save-btn { width: 100%; padding: 14px; border-radius: 14px; background: linear-gradient(135deg, #a78bfa, #ec4899); border: none; color: #fff; font-size: 0.95rem; font-weight: 700; cursor: pointer; margin-top: 6px; }
        
        .calendar-view { padding: 20px; }
        .cal-month { margin-bottom: 24px; }
        .cal-month-header { margin-bottom: 12px; }
        .cal-month-title { font-size: 1.1rem; font-weight: 700; }
        .cal-month-year { font-size: 0.8rem; color: #666; margin-left: 8px; }
        .cal-weekdays { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; margin-bottom: 8px; }
        .cal-weekday { text-align: center; font-size: 0.65rem; color: #666; font-weight: 600; }
        .cal-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; }
        .cal-day { aspect-ratio: 1; border-radius: 8px; background: #1a1a1a; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; font-size: 0.8rem; font-weight: 600; color: #666; position: relative; }
        .cal-day.empty { background: transparent; cursor: default; }
        .cal-day.done { background: linear-gradient(135deg, #a78bfa, #ec4899); color: #fff; }
        .cal-day.current { border: 2px solid #a78bfa; }
        .cal-day.future { opacity: 0.3; }
        .cal-day.outside { opacity: 0.15; cursor: default; }
        .cal-day .type-dot { position: absolute; bottom: 3px; width: 4px; height: 4px; border-radius: 50%; }
        .cal-day .type-dot.barbell { background: #f97316; }
        .cal-day .type-dot.tempo { background: #ec4899; }
        .cal-day .type-dot.flex { background: #22c55e; }
        
        .progress-view { padding: 20px; }
        .progress-card { background: #1a1a1a; border-radius: 14px; padding: 14px; margin-bottom: 10px; }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .progress-title { font-size: 0.8rem; color: #888; }
        .progress-value { font-size: 1.2rem; font-weight: 700; }
        .progress-bar { height: 6px; background: #2a2a2a; border-radius: 3px; overflow: hidden; }
        .progress-fill { height: 100%; border-radius: 3px; background: linear-gradient(90deg, #a78bfa, #ec4899); }
        .neural-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-top: 10px; }
        .neural-item { text-align: center; }
        .neural-emoji { font-size: 1.1rem; }
        .neural-count { font-size: 0.95rem; font-weight: 700; }
        .neural-label { font-size: 0.6rem; color: #666; }
    </style>
</head>
<body>
    <div class="app" id="app"></div>
    <script>
        const START_DATE = new Date(2026, 0, 11); // Jan 11, 2026
        const DAY_TYPES = {
            0: { type: 'flex', name: 'Deep Flex + Photos', icon: 'üì∏' },
            1: { type: 'barbell', name: 'Barbell Day', icon: 'üèãÔ∏è' },
            2: { type: 'tempo', name: 'Tempo Challenge', icon: 'üéØ' },
            3: { type: 'flex', name: 'Front Split', icon: 'üßò' },
            4: { type: 'tempo', name: 'Tempo Challenge', icon: 'üéØ' },
            5: { type: 'barbell', name: 'Barbell Day', icon: 'üèãÔ∏è' },
            6: { type: 'tempo', name: 'Tempo Challenge', icon: 'üéØ' }
        };
        const MONTHS = ['January','February','March','April','May','June','July','August','September','October','November','December'];
        const DAYS = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
        const DAYS_S = ['S','M','T','W','T','F','S'];

        let state = { view: 'today', modalOpen: false, selectedDay: null, detailsOpen: false, data: null };

        const getDate = n => { const d = new Date(START_DATE); d.setDate(d.getDate() + n - 1); return d; };
        const getDayNum = d => Math.floor((d - START_DATE) / 86400000) + 1;
        const fmt = (d, f) => f === 'full' ? `${DAYS[d.getDay()]}, ${MONTHS[d.getMonth()]} ${d.getDate()}, ${d.getFullYear()}` : f === 'medium' ? `${MONTHS[d.getMonth()]} ${d.getDate()}` : `${d.getMonth()+1}/${d.getDate()}`;
        const getType = n => DAY_TYPES[getDate(n).getDay()];
        const getToday = () => { const t = new Date(); t.setHours(0,0,0,0); const s = new Date(START_DATE); s.setHours(0,0,0,0); return t < s ? 1 : Math.min(Math.max(Math.floor((t-s)/86400000)+1,1),70); };

        function init() {
            const s = localStorage.getItem('miamiV6');
            if (s) { state.data = JSON.parse(s); state.data.currentDay = getToday(); }
            else {
                const days = [];
                for (let i = 1; i <= 70; i++) days.push({ number: i, phase: i <= 21 ? 1 : i <= 42 ? 2 : 3, dayType: getType(i).type, completed: false, hipThrustWeight: null, hipThrustReps: '', rdlWeight: null, gluteConnection: null, bestCue: '', formOk: false, neuralDone: false, tempoClass: '', tempoDuration: null, flexType: '', splitGap: null, hipPain: null, proteinHit: false, notes: '', slowedDown: false, locatedBefore: false, locatedDuring: false, locatedAfter: false, quadsTakeOver: false });
                state.data = { days, currentDay: getToday() };
                save();
            }
        }

        const save = () => localStorage.setItem('miamiV6', JSON.stringify(state.data));
        const render = () => document.getElementById('app').innerHTML = (state.view === 'today' ? renderToday() : state.view === 'calendar' ? renderCal() : renderProg()) + renderNav() + renderModal();

        function renderToday() {
            const d = state.data, today = d.days[d.currentDay-1], done = d.days.filter(x=>x.completed).length;
            const prog = (done/70)*360, date = getDate(d.currentDay), end = getDate(70), type = getType(d.currentDay);
            const phases = {1:'Phase 1: Fix Signal',2:'Phase 2: Reinforce',3:'Phase 3: Build'};
            const wts = {1:'115-120 lbs',2:'125-130 lbs',3:'135-145 lbs'};
            const lastWt = [...d.days].reverse().find(x=>x.hipThrustWeight)?.hipThrustWeight||'‚Äî';
            const lastPain = [...d.days].reverse().find(x=>x.hipPain!==null)?.hipPain??'‚Äî';
            const emoji = {red:'üî¥',yellow:'üü°',green:'üü¢',sparkles:'‚ú®'};

            const ws = d.currentDay - date.getDay(), week = [];
            for (let i=0;i<7;i++) { const n=ws+i; if(n>=1&&n<=70) week.push({num:n,day:d.days[n-1],type:getType(n),date:getDate(n)}); }

            let sum = '';
            if (today.completed) {
                if (type.type==='barbell') sum = `<div class="summary-row"><span class="summary-label">Hip Thrust</span><span class="summary-value">${today.hipThrustWeight||'‚Äî'} √ó ${today.hipThrustReps||'‚Äî'}</span></div><div class="summary-row"><span class="summary-label">RDL</span><span class="summary-value">${today.rdlWeight||'‚Äî'} lbs</span></div><div class="summary-row"><span class="summary-label">Connection</span><span class="summary-value">${emoji[today.gluteConnection]||'‚Äî'}</span></div><div class="summary-row"><span class="summary-label">Cue</span><span class="summary-value">${today.bestCue||'‚Äî'}</span></div>`;
                else if (type.type==='tempo') sum = `<div class="summary-row"><span class="summary-label">Class</span><span class="summary-value">${today.tempoClass||'‚Äî'}</span></div><div class="summary-row"><span class="summary-label">Duration</span><span class="summary-value">${today.tempoDuration||'‚Äî'} min</span></div>`;
                else sum = `<div class="summary-row"><span class="summary-label">Type</span><span class="summary-value">${today.flexType||'‚Äî'}</span></div><div class="summary-row"><span class="summary-label">Gap</span><span class="summary-value">${today.splitGap||'‚Äî'} in</span></div>`;
                sum += `<div class="summary-row"><span class="summary-label">Pain</span><span class="summary-value">${today.hipPain??'‚Äî'}/10</span></div><div class="summary-row"><span class="summary-label">Protein</span><span class="summary-value">${today.proteinHit?'‚úì':'‚Äî'}</span></div>`;
            }

            return `<div class="header"><div class="date-display">${fmt(date,'full')}</div><div class="day-ring" style="--progress-rotation:${prog}deg"><div class="day-num">${d.currentDay}</div><div class="day-label">of 70</div></div><div class="day-type-badge ${type.type}">${type.icon} ${type.name}</div><div class="phase-info">${phases[today.phase]}${type.type==='barbell'?` <span>‚Ä¢ ${wts[today.phase]}</span>`:''}</div></div>
                <button class="log-btn ${today.completed?'done':''}" onclick="openModal()">${today.completed?'‚úì Logged':'Log Today ‚Üí'}</button>
                ${today.completed?`<div class="summary"><div class="summary-card">${sum}</div></div>`:''}
                <div class="week-schedule"><div class="week-header"><div class="week-title">This Week</div><div class="week-dates">${fmt(getDate(Math.max(ws,1)),'medium')} - ${fmt(getDate(Math.min(ws+6,70)),'medium')}</div></div><div class="week-days">${week.map(w=>`<div class="week-day ${w.num===d.currentDay?'current':''} ${w.day.completed?'done':''} ${w.num>d.currentDay?'future':''}" onclick="openModal(${w.num})"><div class="name">${DAYS_S[w.date.getDay()]}</div><div class="date">${w.date.getDate()}</div><div class="type">${w.type.icon}</div></div>`).join('')}</div></div>
                <div class="stats"><div class="stat"><div class="stat-value">${done}</div><div class="stat-label">Done</div></div><div class="stat"><div class="stat-value">${lastWt}</div><div class="stat-label">Weight</div></div><div class="stat"><div class="stat-value">${lastPain}</div><div class="stat-label">Pain</div></div><div class="stat"><div class="stat-value">${70-done}</div><div class="stat-label">Left</div></div></div>
                <div class="end-date"><div class="label">Miami Ready</div><div class="date">${fmt(end,'full')}</div></div>
                <div class="mini-cal"><div class="mini-cal-header"><div class="mini-cal-title">70 Days</div><div class="mini-cal-dates">${fmt(getDate(1))} - ${fmt(end)}</div></div><div class="mini-cal-grid">${d.days.map((x,i)=>`<div class="mini-day ${x.completed?'done':''} ${i+1===d.currentDay?'current':''} ${i+1>d.currentDay?'future':''}"></div>`).join('')}</div></div>`;
        }

        function renderCal() {
            const d = state.data, months = [];
            let cur = new Date(START_DATE.getFullYear(), START_DATE.getMonth(), 1);
            const last = new Date(getDate(70).getFullYear(), getDate(70).getMonth(), 1);
            while (cur <= last) { months.push(new Date(cur)); cur.setMonth(cur.getMonth()+1); }

            let h = '<div class="calendar-view">';
            for (const m of months) {
                const y=m.getFullYear(), mi=m.getMonth(), first=new Date(y,mi,1).getDay(), days=new Date(y,mi+1,0).getDate();
                h += `<div class="cal-month"><div class="cal-month-header"><span class="cal-month-title">${MONTHS[mi]}</span><span class="cal-month-year">${y}</span></div><div class="cal-weekdays">${DAYS_S.map(x=>`<div class="cal-weekday">${x}</div>`).join('')}</div><div class="cal-grid">`;
                for (let i=0;i<first;i++) h+='<div class="cal-day empty"></div>';
                for (let day=1;day<=days;day++) {
                    const date=new Date(y,mi,day), dn=getDayNum(date);
                    if (dn>=1&&dn<=70) { const dd=d.days[dn-1],type=getType(dn); h+=`<div class="cal-day ${dd.completed?'done':''} ${dn===d.currentDay?'current':''} ${dn>d.currentDay?'future':''}" onclick="openModal(${dn})">${day}<div class="type-dot ${type.type}"></div></div>`; }
                    else h+=`<div class="cal-day outside">${day}</div>`;
                }
                h+='</div></div>';
            }
            return h+'</div>';
        }

        function renderProg() {
            const d = state.data, done = d.days.filter(x=>x.completed).length;
            const bb = d.days.filter(x=>x.dayType==='barbell'&&x.completed).length, tB = d.days.filter(x=>x.dayType==='barbell').length;
            const tm = d.days.filter(x=>x.dayType==='tempo'&&x.completed).length, tT = d.days.filter(x=>x.dayType==='tempo').length;
            const fl = d.days.filter(x=>x.dayType==='flex'&&x.completed).length, tF = d.days.filter(x=>x.dayType==='flex').length;
            const wt = [...d.days].reverse().find(x=>x.hipThrustWeight)?.hipThrustWeight||115;
            const pn = [...d.days].reverse().find(x=>x.hipPain!==null)?.hipPain||6;
            const pr = d.days.filter(x=>x.proteinHit).length;
            const cn = {red:0,yellow:0,green:0,sparkles:0}; d.days.forEach(x=>{if(x.gluteConnection)cn[x.gluteConnection]++;});

            return `<div class="progress-view">
                <div class="progress-card"><div class="progress-header"><span class="progress-title">Overall</span><span class="progress-value">${done}/70</span></div><div class="progress-bar"><div class="progress-fill" style="width:${(done/70)*100}%"></div></div></div>
                <div class="progress-card"><div class="progress-header"><span class="progress-title">Hip Thrust</span><span class="progress-value">${wt} lbs</span></div><div class="progress-bar"><div class="progress-fill" style="width:${Math.min(100,((wt-115)/30)*100)}%"></div></div></div>
                <div class="progress-card"><div class="progress-header"><span class="progress-title">Hip Pain</span><span class="progress-value">${pn}/10</span></div><div class="progress-bar"><div class="progress-fill" style="width:${(1-pn/10)*100}%;background:linear-gradient(90deg,#22c55e,#10b981)"></div></div></div>
                <div class="progress-card"><div class="progress-title" style="margin-bottom:10px">Workouts</div><div style="display:flex;justify-content:space-around;text-align:center"><div><div style="font-size:1.3rem">üèãÔ∏è</div><div style="font-weight:700">${bb}/${tB}</div><div style="font-size:0.6rem;color:#666">Barbell</div></div><div><div style="font-size:1.3rem">üéØ</div><div style="font-weight:700">${tm}/${tT}</div><div style="font-size:0.6rem;color:#666">Tempo</div></div><div><div style="font-size:1.3rem">üßò</div><div style="font-weight:700">${fl}/${tF}</div><div style="font-size:0.6rem;color:#666">Flex</div></div></div></div>
                <div class="progress-card"><div class="progress-title" style="margin-bottom:8px">Neural</div><div class="neural-grid"><div class="neural-item"><div class="neural-emoji">üî¥</div><div class="neural-count">${cn.red}</div><div class="neural-label">Quad</div></div><div class="neural-item"><div class="neural-emoji">üü°</div><div class="neural-count">${cn.yellow}</div><div class="neural-label">Learning</div></div><div class="neural-item"><div class="neural-emoji">üü¢</div><div class="neural-count">${cn.green}</div><div class="neural-label">Strong</div></div><div class="neural-item"><div class="neural-emoji">‚ú®</div><div class="neural-count">${cn.sparkles}</div><div class="neural-label">Locked</div></div></div></div>
                <div class="progress-card"><div class="progress-header"><span class="progress-title">Protein</span><span class="progress-value">${pr}/${done||1}</span></div><div class="progress-bar"><div class="progress-fill" style="width:${done?(pr/done)*100:0}%"></div></div></div>
            </div>`;
        }

        function renderNav() { return `<div class="bottom-nav"><button class="nav-btn ${state.view==='today'?'active':''}" onclick="switchView('today')"><span class="icon">‚óâ</span><span>Today</span></button><button class="nav-btn ${state.view==='calendar'?'active':''}" onclick="switchView('calendar')"><span class="icon">‚ñ¶</span><span>Calendar</span></button><button class="nav-btn ${state.view==='progress'?'active':''}" onclick="switchView('progress')"><span class="icon">‚óî</span><span>Progress</span></button></div>`; }

        function renderModal() {
            if (!state.modalOpen) return '<div class="modal-overlay"></div>';
            const n = state.selectedDay||state.data.currentDay, d = state.data.days[n-1], date = getDate(n), type = getType(n);
            const wts = {1:'115-120',2:'125-130',3:'135-145'};
            let form = '';
            if (type.type==='barbell') {
                form = `<div class="section-header">üèãÔ∏è Barbell</div><div class="form-row"><div class="form-group"><label class="form-label">Hip Thrust</label><input type="number" class="form-input" id="htWt" value="${d.hipThrustWeight||''}" placeholder="${wts[d.phase]} lbs"></div><div class="form-group"><label class="form-label">Sets√óReps</label><input type="text" class="form-input" id="htReps" value="${d.hipThrustReps||''}" placeholder="3√ó10"></div></div><div class="form-group"><label class="form-label">RDL</label><input type="number" class="form-input" id="rdl" value="${d.rdlWeight||''}" placeholder="lbs"></div><div class="section-header">üß† Connection</div><div class="connection-grid">${[{k:'red',e:'üî¥',l:'None'},{k:'yellow',e:'üü°',l:'Partial'},{k:'green',e:'üü¢',l:'Strong'},{k:'sparkles',e:'‚ú®',l:'Locked'}].map(c=>`<button class="conn-btn ${d.gluteConnection===c.k?'selected':''}" onclick="setConn('${c.k}')"><span class="emoji">${c.e}</span><span class="label">${c.l}</span></button>`).join('')}</div><div class="form-group"><label class="form-label">Best Cue</label><input type="text" class="form-input" id="cue" value="${d.bestCue||''}" placeholder="What worked?"></div><div class="quick-toggles"><div class="quick-toggle ${d.formOk?'on':''}" onclick="toggle('formOk')"><div class="icon">üìê</div><div class="text">Form OK</div></div><div class="quick-toggle ${d.neuralDone?'on':''}" onclick="toggle('neuralDone')"><div class="icon">üß†</div><div class="text">Neural</div></div></div><button class="details-btn" onclick="toggleDet()">${state.detailsOpen?'Hide ‚ñ≤':'Details ‚ñº'}</button><div class="details ${state.detailsOpen?'open':''}"><div class="details-title">Neural</div>${['slowedDown:Slowed (3-1-3)','locatedBefore:Before','locatedDuring:During','locatedAfter:After (2s)','quadsTakeOver:Quads?'].map(t=>{const[k,l]=t.split(':');return`<div class="toggle-row"><span class="toggle-label">${l}</span><div class="toggle-switch ${d[k]?'on':''}" onclick="toggle('${k}')"><div class="toggle-knob"></div></div></div>`;}).join('')}</div>`;
            } else if (type.type==='tempo') {
                form = `<div class="section-header">üéØ Tempo</div><div class="tempo-options">${[{k:'Shape Shift',n:'Shape Shift',d:'Deadlift'},{k:'January Challenge',n:'January',d:'Daily'},{k:'Custom',n:'Custom',d:'Other'}].map(t=>`<div class="tempo-opt ${d.tempoClass===t.k?'selected':''}" onclick="setTempo('${t.k}')"><div class="name">${t.n}</div><div class="desc">${t.d}</div></div>`).join('')}</div><div class="form-group"><label class="form-label">Duration</label><input type="number" class="form-input" id="dur" value="${d.tempoDuration||''}" placeholder="min"></div>`;
            } else {
                const sun = date.getDay()===0;
                form = `<div class="section-header">üßò Flex</div><div class="flex-options">${sun?`<div class="flex-opt ${d.flexType==='Deep Session'?'selected':''}" onclick="setFlex('Deep Session')"><div class="name">Deep</div><div class="time">60m</div></div><div class="flex-opt ${d.flexType==='Progress Photos'?'selected':''}" onclick="setFlex('Progress Photos')"><div class="name">üì∏</div><div class="time">Photos</div></div>`:`<div class="flex-opt ${d.flexType==='Front Split'?'selected':''}" onclick="setFlex('Front Split')"><div class="name">Front</div><div class="time">30m</div></div><div class="flex-opt ${d.flexType==='Middle Split'?'selected':''}" onclick="setFlex('Middle Split')"><div class="name">Middle</div><div class="time">15m</div></div>`}</div><div class="form-group"><label class="form-label">Gap (in)</label><input type="number" class="form-input" id="gap" value="${d.splitGap||''}" placeholder="inches"></div>`;
            }
            return `<div class="modal-overlay active" onclick="closeModal()"><div class="modal" onclick="event.stopPropagation()"><div class="modal-handle"></div><div class="modal-header"><div><div class="modal-title">${fmt(date,'medium')}</div><div class="modal-subtitle">${type.icon} ${type.name} ‚Ä¢ Day ${n}</div></div><button class="modal-close" onclick="closeModal()">√ó</button></div>${form}<div class="section-header">üìä Daily</div><div class="form-group"><label class="form-label">Pain (0-10)</label><input type="number" class="form-input" id="pain" value="${d.hipPain??''}" placeholder="0-10" min="0" max="10"></div><div class="quick-toggles"><div class="quick-toggle ${d.proteinHit?'on':''}" onclick="toggle('proteinHit')"><div class="icon">ü•©</div><div class="text">Protein 120g+</div></div></div><div class="form-group"><label class="form-label">Notes</label><textarea class="form-input" id="notes" style="min-height:50px">${d.notes||''}</textarea></div><button class="save-btn" onclick="saveDay()">${d.completed?'Update':'Complete'} ‚úì</button></div></div>`;
        }

        const switchView = v => { state.view = v; render(); };
        const openModal = n => { state.selectedDay = n||state.data.currentDay; state.modalOpen = true; state.detailsOpen = false; render(); };
        const closeModal = () => { state.modalOpen = false; render(); };
        const setConn = v => { state.data.days[(state.selectedDay||state.data.currentDay)-1].gluteConnection = v; render(); };
        const setTempo = v => { state.data.days[(state.selectedDay||state.data.currentDay)-1].tempoClass = v; render(); };
        const setFlex = v => { state.data.days[(state.selectedDay||state.data.currentDay)-1].flexType = v; render(); };
        const toggle = f => { state.data.days[(state.selectedDay||state.data.currentDay)-1][f] = !state.data.days[(state.selectedDay||state.data.currentDay)-1][f]; render(); };
        const toggleDet = () => { state.detailsOpen = !state.detailsOpen; render(); };

        function saveDay() {
            const n = state.selectedDay||state.data.currentDay, d = state.data.days[n-1], type = getType(n);
            d.completed = true;
            d.hipPain = parseFloat(document.getElementById('pain')?.value)||null;
            d.notes = document.getElementById('notes')?.value||'';
            if (type.type==='barbell') { d.hipThrustWeight = parseFloat(document.getElementById('htWt')?.value)||null; d.hipThrustReps = document.getElementById('htReps')?.value||''; d.rdlWeight = parseFloat(document.getElementById('rdl')?.value)||null; d.bestCue = document.getElementById('cue')?.value||''; }
            else if (type.type==='tempo') { d.tempoDuration = parseFloat(document.getElementById('dur')?.value)||null; }
            else { d.splitGap = parseFloat(document.getElementById('gap')?.value)||null; }
            save(); closeModal();
            if (n===70&&d.completed) setTimeout(()=>alert('üéâ MIAMI READY! üçë‚ú®'),300);
        }

        init(); render();
    </script>
</body>
</html>
